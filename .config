# --- 硬件与系统底层 (地基) ---
CONFIG_TARGET_x86_64=y
CONFIG_TARGET_x86_64_DEVICE_generic=y
CONFIG_TARGET_KERNEL_PARTSIZE=256
CONFIG_TARGET_ROOTFS_PARTSIZE=1024
CONFIG_PACKAGE_kmod-igc=y
CONFIG_PACKAGE_kmod-nvme=y
CONFIG_PACKAGE_kmod-mii=y
CONFIG_PACKAGE_kmod-intel-microcode=y
CONFIG_PACKAGE_kmod-crypto-aesni=y
CONFIG_PACKAGE_irqbalance=y

# 核心安全：关闭全量编译，防止 V2 类似的磁盘/内存溢出
# CONFIG_ALL_KMODS is not set

# --- 网络核心与高并发优化 ---
CONFIG_PACKAGE_kmod-tcp-bbr=y
CONFIG_PACKAGE_kmod-nft-fullconntrack=y
CONFIG_PACKAGE_tcpdump=y
CONFIG_PACKAGE_luci-app-turboacc=y
CONFIG_PACKAGE_luci-app-turboacc_INCLUDE_OFFLOADING=y
CONFIG_PACKAGE_luci-app-turboacc_INCLUDE_BBR_CCA=y
CONFIG_PACKAGE_luci-i18n-turboacc-zh-cn=y

# --- 存储、Docker 与 虚拟化 ---
CONFIG_PACKAGE_luci-app-diskman=y
CONFIG_PACKAGE_luci-i18n-diskman-zh-cn=y
CONFIG_PACKAGE_fdisk=y
CONFIG_PACKAGE_lsblk=y
CONFIG_PACKAGE_e2fsprogs=y
CONFIG_PACKAGE_smartmontools=y
CONFIG_PACKAGE_partx-utils=y

CONFIG_PACKAGE_luci-app-dockerman=y
CONFIG_PACKAGE_luci-i18n-dockerman-zh-cn=y
CONFIG_PACKAGE_docker-ce=y
CONFIG_PACKAGE_containerd=y
CONFIG_PACKAGE_runc=y
CONFIG_PACKAGE_kmod-veth=y
CONFIG_PACKAGE_kmod-ikconfig=y
CONFIG_PACKAGE_kmod-nf-ipvs=y

# --- 影院级流媒体优化 (Apple TV 专用) ---
CONFIG_PACKAGE_luci-app-passwall=y
CONFIG_PACKAGE_luci-i18n-passwall-zh-cn=y
CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Sing_Box=y
CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Xray=y
CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Haproxy=y
CONFIG_PACKAGE_luci-app-passwall_INCLUDE_ChinaDNS_NG=y
CONFIG_PACKAGE_luci-app-smartdns=y
CONFIG_PACKAGE_luci-i18n-smartdns-zh-cn=y
CONFIG_PACKAGE_luci-app-adguardhome=y
CONFIG_PACKAGE_luci-i18n-adguardhome-zh-cn=y

# --- 功能补全 (运维/监控) ---
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_luci-app-ttyd=y
CONFIG_PACKAGE_luci-i18n-ttyd-zh-cn=y
CONFIG_PACKAGE_luci-app-statistics=y
CONFIG_PACKAGE_collectd-mod-thermal=y
CONFIG_PACKAGE_ca-bundle=y
CONFIG_PACKAGE_ca-certificates=y

# --- 界面主题 ---
CONFIG_PACKAGE_luci-theme-argon=y
CONFIG_PACKAGE_luci-app-argon-config=y
CONFIG_PACKAGE_luci-i18n-argon-config-zh-cn=y
CONFIG_PACKAGE_luci-i18n-base-zh-cn=y

# 跨国远程维护 (数字游民必备)
CONFIG_PACKAGE_luci-app-zerotier=y
CONFIG_PACKAGE_luci-i18n-zerotier-zh-cn=y

# 保护你的 NVMe SSD
CONFIG_PACKAGE_zram-swap=y
CONFIG_PACKAGE_kmod-zram=y

# 硬件监控 (N100 状态实时掌握)
CONFIG_PACKAGE_luci-app-netdata=y
CONFIG_PACKAGE_luci-i18n-netdata-zh-cn=y

# --- V3 纠错：行政处决报错包 ---
# 彻底停用导致 V2 崩溃的 Shadowsocks-rust (Sing-Box 已包含其功能)
# CONFIG_PACKAGE_shadowsocks-rust-sslocal is not set
# CONFIG_PACKAGE_shadowsocks-rust-ssserver is not set
CONFIG_PACKAGE_shadowsocks-rust-sslocal=n
CONFIG_PACKAGE_shadowsocks-rust-ssserver=n

# 移除其他已知导致内核依赖报错的包
# CONFIG_PACKAGE_kmod-r8101 is not set
# CONFIG_PACKAGE_dahdi-linux is not set
# CONFIG_PACKAGE_openvswitch is not set

# --- SSR 核心补全 (维持 PassWall 逻辑完整) ---
CONFIG_PACKAGE_shadowsocksr-libev-alt=y
CONFIG_PACKAGE_shadowsocksr-libev-ssr-local=y

# --- 存储补全：让 N100 读写所有格式的硬盘 ---
CONFIG_PACKAGE_kmod-fs-exfat=y
CONFIG_PACKAGE_kmod-fs-ntfs3=y
CONFIG_PACKAGE_kmod-usb-storage-uas=y

# UAS 是 USB 3.0 的加速协议，N100 不开这个，USB 速度会掉到 USB 2.0 水平
CONFIG_PACKAGE_automount=y

# --- 彻底切断 PassWall 对 Rust 的依赖 ---
CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Shadowsocks_Rust=n
CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Shadowsocks_Libev=y

# 既然用了 Sing-Box，建议把 xray-plugin 也带上，防止某些旧节点协议失效
CONFIG_PACKAGE_xray-plugin=y
